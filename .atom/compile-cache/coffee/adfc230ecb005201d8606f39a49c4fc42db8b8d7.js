(function() {
  var BLOCKQUOTE_REGEX, LIST_AL_REGEX, LIST_AL_TASK_REGEX, LIST_OL_REGEX, LIST_OL_TASK_REGEX, LIST_UL_REGEX, LIST_UL_TASK_REGEX, LineMeta, TYPES, incStr, utils;

  utils = require("../utils");

  LIST_UL_TASK_REGEX = /^(\s*)([*+-\.])\s+\[[xX ]\]\s*(.*)$/;

  LIST_UL_REGEX = /^(\s*)([*+-\.])\s+(.*)$/;

  LIST_OL_TASK_REGEX = /^(\s*)(\d+)([\.\)])\s+\[[xX ]\]\s*(.*)$/;

  LIST_OL_REGEX = /^(\s*)(\d+)([\.\)])\s+(.*)$/;

  LIST_AL_TASK_REGEX = /^(\s*)([a-zA-Z]+)([\.\)])\s+\[[xX ]\]\s*(.*)$/;

  LIST_AL_REGEX = /^(\s*)([a-zA-Z]+)([\.\)])\s+(.*)$/;

  BLOCKQUOTE_REGEX = /^(\s*)(>)\s*(.*)$/;

  incStr = function(str) {
    var num;
    num = parseInt(str, 10);
    if (isNaN(num)) {
      return utils.incrementChars(str);
    } else {
      return num + 1;
    }
  };

  TYPES = [
    {
      name: ["list", "ul", "task"],
      regex: LIST_UL_TASK_REGEX,
      lineHead: function(indent, head, suffix) {
        return "" + indent + head + " [ ] ";
      },
      defaultHead: function(head) {
        return head;
      }
    }, {
      name: ["list", "ul"],
      regex: LIST_UL_REGEX,
      lineHead: function(indent, head, suffix) {
        return "" + indent + head + " ";
      },
      defaultHead: function(head) {
        return head;
      }
    }, {
      name: ["list", "ol", "task"],
      regex: LIST_OL_TASK_REGEX,
      lineHead: function(indent, head, suffix) {
        return "" + indent + head + suffix + " [ ] ";
      },
      nextLine: function(indent, head, suffix) {
        return "" + indent + (incStr(head)) + suffix + " [ ] ";
      },
      defaultHead: function(head) {
        return "1";
      }
    }, {
      name: ["list", "ol"],
      regex: LIST_OL_REGEX,
      lineHead: function(indent, head, suffix) {
        return "" + indent + head + suffix + " ";
      },
      nextLine: function(indent, head, suffix) {
        return "" + indent + (incStr(head)) + suffix + " ";
      },
      defaultHead: function(head) {
        return "1";
      }
    }, {
      name: ["list", "ol", "al", "task"],
      regex: LIST_AL_TASK_REGEX,
      lineHead: function(indent, head, suffix) {
        return "" + indent + head + suffix + " [ ] ";
      },
      nextLine: function(indent, head, suffix) {
        return "" + indent + (incStr(head)) + suffix + " [ ] ";
      },
      defaultHead: function(head) {
        var c;
        c = utils.isUpperCase(head) ? "A" : "a";
        return head.replace(/./g, c);
      }
    }, {
      name: ["list", "ol", "al"],
      regex: LIST_AL_REGEX,
      lineHead: function(indent, head, suffix) {
        return "" + indent + head + suffix + " ";
      },
      nextLine: function(indent, head, suffix) {
        return "" + indent + (incStr(head)) + suffix + " ";
      },
      defaultHead: function(head) {
        var c;
        c = utils.isUpperCase(head) ? "A" : "a";
        return head.replace(/./g, c);
      }
    }, {
      name: ["blockquote"],
      regex: BLOCKQUOTE_REGEX,
      lineHead: function(indent, head, suffix) {
        return indent + "> ";
      },
      defaultHead: function(head) {
        return ">";
      }
    }
  ];

  module.exports = LineMeta = (function() {
    function LineMeta(line) {
      this.line = line;
      this.type = void 0;
      this.head = "";
      this.defaultHead = "";
      this.body = "";
      this.indent = "";
      this.nextLine = "";
      this._findMeta();
    }

    LineMeta.prototype._findMeta = function() {
      var i, len, matches, results, type;
      results = [];
      for (i = 0, len = TYPES.length; i < len; i++) {
        type = TYPES[i];
        if (matches = type.regex.exec(this.line)) {
          this.type = type;
          this.indent = matches[1];
          this.head = matches[2];
          this.defaultHead = type.defaultHead(matches[2]);
          this.suffix = matches.length >= 4 ? matches[3] : "";
          this.body = matches[matches.length - 1];
          this.nextLine = (type.nextLine || type.lineHead).call(null, this.indent, this.head, this.suffix);
          break;
        } else {
          results.push(void 0);
        }
      }
      return results;
    };

    LineMeta.prototype.lineHead = function(head) {
      return this.type.lineHead(this.indent, head, this.suffix);
    };

    LineMeta.prototype.isTaskList = function() {
      return this.type && this.type.name.indexOf("task") !== -1;
    };

    LineMeta.prototype.isList = function(type) {
      return this.type && this.type.name.indexOf("list") !== -1 && (!type || this.type.name.indexOf(type) !== -1);
    };

    LineMeta.prototype.isContinuous = function() {
      return !!this.nextLine;
    };

    LineMeta.prototype.isEmptyBody = function() {
      return !this.body;
    };

    LineMeta.isList = function(line) {
      return LIST_UL_REGEX.test(line) || LIST_OL_REGEX.test(line) || LIST_AL_REGEX.test(line);
    };

    LineMeta.isOrderedList = function(line) {
      return LIST_OL_REGEX.test(line) || LIST_AL_REGEX.test(line);
    };

    LineMeta.isUnorderedList = function(line) {
      return LIST_UL_REGEX.test(line);
    };

    LineMeta.incStr = incStr;

    return LineMeta;

  })();

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiL2hvbWUvamVzdXMvLmF0b20vcGFja2FnZXMvbWFya2Rvd24td3JpdGVyL2xpYi9oZWxwZXJzL2xpbmUtbWV0YS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxNQUFBOztFQUFBLEtBQUEsR0FBUSxPQUFBLENBQVEsVUFBUjs7RUFFUixrQkFBQSxHQUFxQjs7RUFDckIsYUFBQSxHQUFxQjs7RUFDckIsa0JBQUEsR0FBcUI7O0VBQ3JCLGFBQUEsR0FBcUI7O0VBQ3JCLGtCQUFBLEdBQXFCOztFQUNyQixhQUFBLEdBQXFCOztFQUNyQixnQkFBQSxHQUFxQjs7RUFFckIsTUFBQSxHQUFTLFNBQUMsR0FBRDtBQUNQLFFBQUE7SUFBQSxHQUFBLEdBQU0sUUFBQSxDQUFTLEdBQVQsRUFBYyxFQUFkO0lBQ04sSUFBRyxLQUFBLENBQU0sR0FBTixDQUFIO2FBQW1CLEtBQUssQ0FBQyxjQUFOLENBQXFCLEdBQXJCLEVBQW5CO0tBQUEsTUFBQTthQUNLLEdBQUEsR0FBTSxFQURYOztFQUZPOztFQUtULEtBQUEsR0FBUTtJQUNOO01BQ0UsSUFBQSxFQUFNLENBQUMsTUFBRCxFQUFTLElBQVQsRUFBZSxNQUFmLENBRFI7TUFFRSxLQUFBLEVBQU8sa0JBRlQ7TUFHRSxRQUFBLEVBQVUsU0FBQyxNQUFELEVBQVMsSUFBVCxFQUFlLE1BQWY7ZUFBMEIsRUFBQSxHQUFHLE1BQUgsR0FBWSxJQUFaLEdBQWlCO01BQTNDLENBSFo7TUFJRSxXQUFBLEVBQWEsU0FBQyxJQUFEO2VBQVU7TUFBVixDQUpmO0tBRE0sRUFPTjtNQUNFLElBQUEsRUFBTSxDQUFDLE1BQUQsRUFBUyxJQUFULENBRFI7TUFFRSxLQUFBLEVBQU8sYUFGVDtNQUdFLFFBQUEsRUFBVSxTQUFDLE1BQUQsRUFBUyxJQUFULEVBQWUsTUFBZjtlQUEwQixFQUFBLEdBQUcsTUFBSCxHQUFZLElBQVosR0FBaUI7TUFBM0MsQ0FIWjtNQUlFLFdB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LEdBQWtCLFNBQUMsSUFBRDthQUFVLGFBQWEsQ0FBQyxJQUFkLENBQW1CLElBQW5CO0lBQVY7O0lBQ2xCLFFBQUMsQ0FBQSxNQUFELEdBQVM7Ozs7O0FBekdYIiwic291cmNlc0NvbnRlbnQiOlsidXRpbHMgPSByZXF1aXJlIFwiLi4vdXRpbHNcIlxuXG5MSVNUX1VMX1RBU0tfUkVHRVggPSAvLy8gXiAoXFxzKikgKFsqKy1cXC5dKSBcXHMrIFxcW1t4WFxcIF1cXF0gXFxzKiAoLiopICQgLy8vXG5MSVNUX1VMX1JFR0VYICAgICAgPSAvLy8gXiAoXFxzKikgKFsqKy1cXC5dKSBcXHMrICguKikgJCAvLy9cbkxJU1RfT0xfVEFTS19SRUdFWCA9IC8vLyBeIChcXHMqKSAoXFxkKykoW1xcLlxcKV0pIFxccysgXFxbW3hYXFwgXVxcXSBcXHMqICguKikgJCAvLy9cbkxJU1RfT0xfUkVHRVggICAgICA9IC8vLyBeIChcXHMqKSAoXFxkKykoW1xcLlxcKV0pIFxccysgKC4qKSAkIC8vL1xuTElTVF9BTF9UQVNLX1JFR0VYID0gLy8vIF4gKFxccyopIChbYS16QS1aXSspKFtcXC5cXCldKSBcXHMrIFxcW1t4WFxcIF1cXF0gXFxzKiAoLiopICQgLy8vXG5MSVNUX0FMX1JFR0VYICAgICAgPSAvLy8gXiAoXFxzKikgKFthLXpBLVpdKykoW1xcLlxcKV0pIFxccysgKC4qKSAkIC8vL1xuQkxPQ0tRVU9URV9SRUdFWCAgID0gLy8vIF4gKFxccyopICg+KSBcXHMqICguKikgJCAvLy9cblxuaW5jU3RyID0gKHN0cikgLT5cbiAgbnVtID0gcGFyc2VJbnQoc3RyLCAxMClcbiAgaWYgaXNOYU4obnVtKSB0aGVuIHV0aWxzLmluY3JlbWVudENoYXJzKHN0cilcbiAgZWxzZSBudW0gKyAxXG5cblRZUEVTID0gW1xuICB7XG4gICAgbmFtZTogW1wibGlzdFwiLCBcInVsXCIsIFwidGFza1wiXSxcbiAgICByZWdleDogTElTVF9VTF9UQVNLX1JFR0VYLFxuICAgIGxpbmVIZWFkOiAoaW5kZW50LCBoZWFkLCBzdWZmaXgpIC0+IFwiI3tpbmRlbnR9I3toZWFkfSBbIF0gXCJcbiAgICBkZWZhdWx0SGVhZDogKGhlYWQpIC0+IGhlYWRcbiAgfVxuICB7XG4gICAgbmFtZTogW1wibGlzdFwiLCBcInVsXCJdLFxuICAgIHJlZ2V4OiBMSVNUX1VMX1JFR0VYLFxuICAgIGxpbmVIZWFkOiAoaW5kZW50LCBoZWFkLCBzdWZmaXgpIC0+IFwiI3tpbmRlbnR9I3toZWFkfSBcIlxuICAgIGRlZmF1bHRIZWFkOiAoaGVhZCkgLT4gaGVhZFxuICB9XG4gIHtcbiAgICBuYW1lOiBbXCJsaXN0XCIsIFwib2xcIiwgXCJ0YXNrXCJdLFxuICAgIHJlZ2V4OiBMSVNUX09MX1RBU0tfUkVHRVgsXG4gICAgbGluZUhlYWQ6IChpbmRlbnQsIGhlYWQsIHN1ZmZpeCkgLT4gXCIje2luZGVudH0je2hlYWR9I3tzdWZmaXh9IFsgXSBcIlxuICAgIG5leHRMaW5lOiAoaW5kZW50LCBoZWFkLCBzdWZmaXgpIC0+IFwiI3tpbmRlbnR9I3tpbmNTdHIoaGVhZCl9I3tzdWZmaXh9IFsgXSBcIlxuICAgIGRlZmF1bHRIZWFkOiAoaGVhZCkgLT4gXCIxXCJcbiAgfVxuICB7XG4gICAgbmFtZTogW1wibGlzdFwiLCBcIm9sXCJdLFxuICAgIHJlZ2V4OiBMSVNUX09MX1JFR0VYLFxuICAgIGxpbmVIZWFkOiAoaW5kZW50LCBoZWFkLCBzdWZmaXgpIC0+IFwiI3tpbmRlbnR9I3toZWFkfSN7c3VmZml4fSBcIlxuICAgIG5leHRMaW5lOiAoaW5kZW50LCBoZWFkLCBzdWZmaXgpIC0+IFwiI3tpbmRlbnR9I3tpbmNTdHIoaGVhZCl9I3tzdWZmaXh9IFwiXG4gICAgZGVmYXVsdEhlYWQ6IChoZWFkKSAtPiBcIjFcIlxuICB9XG4gIHtcbiAgICBuYW1lOiBbXCJsaXN0XCIsIFwib2xcIiwgXCJhbFwiLCBcInRhc2tcIl0sXG4gICAgcmVnZXg6IExJU1RfQUxfVEFTS19SRUdFWCxcbiAgICBsaW5lSGVhZDogKGluZGVudCwgaGVhZCwgc3VmZml4KSAtPiBcIiN7aW5kZW50fSN7aGVhZH0je3N1ZmZpeH0gWyBdIFwiXG4gICAgbmV4dExpbmU6IChpbmRlbnQsIGhlYWQsIHN1ZmZpeCkgLT4gXCIje2luZGVudH0je2luY1N0cihoZWFkKX0je3N1ZmZpeH0gWyBdIFwiXG4gICAgZGVmYXVsdEhlYWQ6IChoZWFkKSAtPlxuICAgICAgYyA9IGlmIHV0aWxzLmlzVXBwZXJDYXNlKGhlYWQpIHRoZW4gXCJBXCIgZWxzZSBcImFcIlxuICAgICAgaGVhZC5yZXBsYWNlKC8uL2csIGMpXG4gIH1cbiAge1xuICAgIG5hbWU6IFtcImxpc3RcIiwgXCJvbFwiLCBcImFsXCJdLFxuICAgIHJlZ2V4OiBMSVNUX0FMX1JFR0VYLFxuICAgIGxpbmVIZWFkOiAoaW5kZW50LCBoZWFkLCBzdWZmaXgpIC0+IFwiI3tpbmRlbnR9I3toZWFkfSN7c3VmZml4fSBcIlxuICAgIG5leHRMaW5lOiAoaW5kZW50LCBoZWFkLCBzdWZmaXgpIC0+IFwiI3tpbmRlbnR9I3tpbmNTdHIoaGVhZCl9I3tzdWZmaXh9IFwiXG4gICAgZGVmYXVsdEhlYWQ6IChoZWFkKSAtPlxuICAgICAgYyA9IGlmIHV0aWxzLmlzVXBwZXJDYXNlKGhlYWQpIHRoZW4gXCJBXCIgZWxzZSBcImFcIlxuICAgICAgaGVhZC5yZXBsYWNlKC8uL2csIGMpXG4gIH1cbiAge1xuICAgIG5hbWU6IFtcImJsb2NrcXVvdGVcIl0sXG4gICAgcmVnZXg6IEJMT0NLUVVPVEVfUkVHRVgsXG4gICAgbGluZUhlYWQ6IChpbmRlbnQsIGhlYWQsIHN1ZmZpeCkgLT4gXCIje2luZGVudH0+IFwiXG4gICAgZGVmYXVsdEhlYWQ6IChoZWFkKSAtPiBcIj5cIlxuICB9XG5dXG5cbm1vZHVsZS5leHBvcnRzID1cbmNsYXNzIExpbmVNZXRhXG4gIGNvbnN0cnVjdG9yOiAobGluZSkgLT5cbiAgICBAbGluZSA9IGxpbmVcbiAgICBAdHlwZSA9IHVuZGVmaW5lZFxuICAgIEBoZWFkID0gXCJcIlxuICAgIEBkZWZhdWx0SGVhZCA9IFwiXCJcbiAgICBAYm9keSA9IFwiXCJcbiAgICBAaW5kZW50ID0gXCJcIlxuICAgIEBuZXh0TGluZSA9IFwiXCJcblxuICAgIEBfZmluZE1ldGEoKVxuXG4gIF9maW5kTWV0YTogLT5cbiAgICBmb3IgdHlwZSBpbiBUWVBFU1xuICAgICAgaWYgbWF0Y2hlcyA9IHR5cGUucmVnZXguZXhlYyhAbGluZSlcbiAgICAgICAgQHR5cGUgPSB0eXBlXG4gICAgICAgIEBpbmRlbnQgPSBtYXRjaGVzWzFdXG4gICAgICAgIEBoZWFkID0gbWF0Y2hlc1syXVxuICAgICAgICBAZGVmYXVsdEhlYWQgPSB0eXBlLmRlZmF1bHRIZWFkKG1hdGNoZXNbMl0pXG4gICAgICAgIEBzdWZmaXggPSBpZiBtYXRjaGVzLmxlbmd0aCA+PSA0IHRoZW4gbWF0Y2hlc1szXSBlbHNlIFwiXCJcbiAgICAgICAgQGJvZHkgPSBtYXRjaGVzW21hdGNoZXMubGVuZ3RoLTFdXG4gICAgICAgIEBuZXh0TGluZSA9ICh0eXBlLm5leHRMaW5lIHx8IHR5cGUubGluZUhlYWQpLmNhbGwobnVsbCwgQGluZGVudCwgQGhlYWQsIEBzdWZmaXgpXG4gICAgICAgIGJyZWFrXG5cbiAgbGluZUhlYWQ6IChoZWFkKSAtPiBAdHlwZS5saW5lSGVhZChAaW5kZW50LCBoZWFkLCBAc3VmZml4KVxuXG4gIGlzVGFza0xpc3Q6IC0+IEB0eXBlICYmIEB0eXBlLm5hbWUuaW5kZXhPZihcInRhc2tcIikgIT0gLTFcbiAgaXNMaXN0OiAodHlwZSkgLT4gQHR5cGUgJiYgQHR5cGUubmFtZS5pbmRleE9mKFwibGlzdFwiKSAhPSAtMSAmJiAoIXR5cGUgfHwgQHR5cGUubmFtZS5pbmRleE9mKHR5cGUpICE9IC0xKVxuICBpc0NvbnRpbnVvdXM6IC0+ICEhQG5leHRMaW5lXG4gIGlzRW1wdHlCb2R5OiAtPiAhQGJvZHlcblxuICAjIFN0YXRpYyBtZXRob2RzXG5cbiAgQGlzTGlzdDogKGxpbmUpIC0+IExJU1RfVUxfUkVHRVgudGVzdChsaW5lKSB8fCBMSVNUX09MX1JFR0VYLnRlc3QobGluZSkgfHwgTElTVF9BTF9SRUdFWC50ZXN0KGxpbmUpXG4gIEBpc09yZGVyZWRMaXN0OiAobGluZSkgLT4gTElTVF9PTF9SRUdFWC50ZXN0KGxpbmUpIHx8IExJU1RfQUxfUkVHRVgudGVzdChsaW5lKVxuICBAaXNVbm9yZGVyZWRMaXN0OiAobGluZSkgLT4gTElTVF9VTF9SRUdFWC50ZXN0KGxpbmUpXG4gIEBpbmNTdHI6IGluY1N0clxuIl19
