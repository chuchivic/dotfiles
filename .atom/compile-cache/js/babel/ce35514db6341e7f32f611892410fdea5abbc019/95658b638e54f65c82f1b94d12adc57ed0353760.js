Object.defineProperty(exports, '__esModule', {
  value: true
});

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _lodashIsArray = require('lodash/isArray');

var _lodashIsArray2 = _interopRequireDefault(_lodashIsArray);

var _lodashIsObject = require('lodash/isObject');

var _lodashIsObject2 = _interopRequireDefault(_lodashIsObject);

var _lodashIsNil = require('lodash/isNil');

var _lodashIsNil2 = _interopRequireDefault(_lodashIsNil);

'use babel';

var ANY_TYPE = 'any';
exports.ANY_TYPE = ANY_TYPE;
var OBJECT_TYPE = 'object';
exports.OBJECT_TYPE = OBJECT_TYPE;
var ARRAY_TYPE = 'array';
exports.ARRAY_TYPE = ARRAY_TYPE;
var ONE_OF_TYPE = 'oneOf';
exports.ONE_OF_TYPE = ONE_OF_TYPE;
var ANY_OF_TYPE = 'anyOf';
exports.ANY_OF_TYPE = ANY_OF_TYPE;
var ALL_OF_TYPE = 'allOf';
exports.ALL_OF_TYPE = ALL_OF_TYPE;
var ENUM_TYPE = 'enum';
exports.ENUM_TYPE = ENUM_TYPE;
var BOOLEAN_TYPE = 'boolean';
exports.BOOLEAN_TYPE = BOOLEAN_TYPE;
var NUMBER_TYPE = 'number';
exports.NUMBER_TYPE = NUMBER_TYPE;
var STRING_TYPE = 'string';
exports.STRING_TYPE = STRING_TYPE;
var NULL_TYPE = 'null';

exports.NULL_TYPE = NULL_TYPE;
var schemaType = function schemaType(schema) {
  if ((0, _lodashIsNil2['default'])(schema)) {
    return ANY_TYPE;
  }

  if (!schema.allOf && !schema.anyOf && !schema.oneOf) {
    if (schema.type === 'object' || (0, _lodashIsObject2['default'])(schema.properties) && !schema.type) {
      return OBJECT_TYPE;
    } else if (schema.type === 'array' || (0, _lodashIsObject2['default'])(schema.items) && !schema.type) {
      return ARRAY_TYPE;
    }
  }

  if ((0, _lodashIsArray2['default'])(schema.oneOf)) {
    return ONE_OF_TYPE;
  } else if ((0, _lodashIsArray2['default'])(schema.anyOf)) {
    return ANY_OF_TYPE;
  } else if ((0, _lodashIsArray2['default'])(schema.allOf)) {
    return ALL_OF_TYPE;
  } else if ((0, _lodashIsObject2['default'])(schema['enum'])) {
    return ENUM_TYPE;
  }

  switch (schema.type) {
    case 'boolean':
      return BOOLEAN_TYPE;
    case 'number':
      return NUMBER_TYPE;
    case 'integer':
      return NUMBER_TYPE;
    case 'string':
      return STRING_TYPE;
    case 'null':
      return NULL_TYPE;
    default:
      break;
  }

  return ANY_TYPE;
};
exports.schemaType = schemaType;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2plc3VzLy5hdG9tL3BhY2thZ2VzL2F1dG9jb21wbGV0ZS1qc29uL3NyYy9qc29uLXNjaGVtYS10eXBlcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7NkJBRW9CLGdCQUFnQjs7Ozs4QkFDZixpQkFBaUI7Ozs7MkJBQ3BCLGNBQWM7Ozs7QUFKaEMsV0FBVyxDQUFBOztBQU1KLElBQU0sUUFBUSxHQUFHLEtBQUssQ0FBQTs7QUFDdEIsSUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFBOztBQUM1QixJQUFNLFVBQVUsR0FBRyxPQUFPLENBQUE7O0FBQzFCLElBQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQTs7QUFDM0IsSUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFBOztBQUMzQixJQUFNLFdBQVcsR0FBRyxPQUFPLENBQUE7O0FBQzNCLElBQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQTs7QUFDeEIsSUFBTSxZQUFZLEdBQUcsU0FBUyxDQUFBOztBQUM5QixJQUFNLFdBQVcsR0FBRyxRQUFRLENBQUE7O0FBQzVCLElBQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQTs7QUFDNUIsSUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFBOzs7QUFFeEIsSUFBTSxVQUFVLEdBQUcsU0FBYixVQUFVLENBQUcsTUFBTSxFQUFJO0FBQ2xDLE1BQUksOEJBQU0sTUFBTSxDQUFDLEVBQUU7QUFDakIsV0FBTyxRQUFRLENBQUE7R0FDaEI7O0FBRUQsTUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRTtBQUNuRCxRQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssUUFBUSxJQUFLLGlDQUFTLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEFBQUMsRUFBRTtBQUM3RSxhQUFPLFdBQVcsQ0FBQTtLQUNuQixNQUFNLElBQUksTUFBTSxDQUFDLElBQUksS0FBSyxPQUFPLElBQUssaUNBQVMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQUFBQyxFQUFFO0FBQzlFLGFBQU8sVUFBVSxDQUFBO0tBQ2xCO0dBQ0Y7O0FBRUQsTUFBSSxnQ0FBUSxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDekIsV0FBTyxXQUFXLENBQUE7R0FDbkIsTUFBTSxJQUFJLGdDQUFRLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUNoQyxXQUFPLFdBQVcsQ0FBQTtHQUNuQixNQUFNLElBQUksZ0NBQVEsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQ2hDLFdBQU8sV0FBVyxDQUFBO0dBQ25CLE1BQU0sSUFBSSxpQ0FBUyxNQUFNLFFBQUssQ0FBQyxFQUFFO0FBQ2hDLFdBQU8sU0FBUyxDQUFBO0dBQ2pCOztBQUVELFVBQVEsTUFBTSxDQUFDLElBQUk7QUFDakIsU0FBSyxTQUFTO0FBQUUsYUFBTyxZQUFZLENBQUE7QUFBQSxBQUNuQyxTQUFLLFFBQVE7QUFBRSxhQUFPLFdBQVcsQ0FBQTtBQUFBLEFBQ2pDLFNBQUssU0FBUztBQUFFLGFBQU8sV0FBVyxDQUFBO0FBQUEsQUFDbEMsU0FBSyxRQUFRO0FBQUUsYUFBTyxXQUFXLENBQUE7QUFBQSxBQUNqQyxTQUFLLE1BQU07QUFBRSxhQUFPLFNBQVMsQ0FBQTtBQUFBLEFBQzdCO0FBQVMsWUFBSztBQUFBLEdBQ2Y7O0FBRUQsU0FBTyxRQUFRLENBQUE7Q0FDaEIsQ0FBQSIsImZpbGUiOiIvaG9tZS9qZXN1cy8uYXRvbS9wYWNrYWdlcy9hdXRvY29tcGxldGUtanNvbi9zcmMvanNvbi1zY2hlbWEtdHlwZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJ1xuXG5pbXBvcnQgaXNBcnJheSBmcm9tICdsb2Rhc2gvaXNBcnJheSdcbmltcG9ydCBpc09iamVjdCBmcm9tICdsb2Rhc2gvaXNPYmplY3QnXG5pbXBvcnQgaXNOaWwgZnJvbSAnbG9kYXNoL2lzTmlsJ1xuXG5leHBvcnQgY29uc3QgQU5ZX1RZUEUgPSAnYW55J1xuZXhwb3J0IGNvbnN0IE9CSkVDVF9UWVBFID0gJ29iamVjdCdcbmV4cG9ydCBjb25zdCBBUlJBWV9UWVBFID0gJ2FycmF5J1xuZXhwb3J0IGNvbnN0IE9ORV9PRl9UWVBFID0gJ29uZU9mJ1xuZXhwb3J0IGNvbnN0IEFOWV9PRl9UWVBFID0gJ2FueU9mJ1xuZXhwb3J0IGNvbnN0IEFMTF9PRl9UWVBFID0gJ2FsbE9mJ1xuZXhwb3J0IGNvbnN0IEVOVU1fVFlQRSA9ICdlbnVtJ1xuZXhwb3J0IGNvbnN0IEJPT0xFQU5fVFlQRSA9ICdib29sZWFuJ1xuZXhwb3J0IGNvbnN0IE5VTUJFUl9UWVBFID0gJ251bWJlcidcbmV4cG9ydCBjb25zdCBTVFJJTkdfVFlQRSA9ICdzdHJpbmcnXG5leHBvcnQgY29uc3QgTlVMTF9UWVBFID0gJ251bGwnXG5cbmV4cG9ydCBjb25zdCBzY2hlbWFUeXBlID0gc2NoZW1hID0+IHtcbiAgaWYgKGlzTmlsKHNjaGVtYSkpIHtcbiAgICByZXR1cm4gQU5ZX1RZUEVcbiAgfVxuXG4gIGlmICghc2NoZW1hLmFsbE9mICYmICFzY2hlbWEuYW55T2YgJiYgIXNjaGVtYS5vbmVPZikge1xuICAgIGlmIChzY2hlbWEudHlwZSA9PT0gJ29iamVjdCcgfHwgKGlzT2JqZWN0KHNjaGVtYS5wcm9wZXJ0aWVzKSAmJiAhc2NoZW1hLnR5cGUpKSB7XG4gICAgICByZXR1cm4gT0JKRUNUX1RZUEVcbiAgICB9IGVsc2UgaWYgKHNjaGVtYS50eXBlID09PSAnYXJyYXknIHx8IChpc09iamVjdChzY2hlbWEuaXRlbXMpICYmICFzY2hlbWEudHlwZSkpIHtcbiAgICAgIHJldHVybiBBUlJBWV9UWVBFXG4gICAgfVxuICB9XG5cbiAgaWYgKGlzQXJyYXkoc2NoZW1hLm9uZU9mKSkge1xuICAgIHJldHVybiBPTkVfT0ZfVFlQRVxuICB9IGVsc2UgaWYgKGlzQXJyYXkoc2NoZW1hLmFueU9mKSkge1xuICAgIHJldHVybiBBTllfT0ZfVFlQRVxuICB9IGVsc2UgaWYgKGlzQXJyYXkoc2NoZW1hLmFsbE9mKSkge1xuICAgIHJldHVybiBBTExfT0ZfVFlQRVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHNjaGVtYS5lbnVtKSkge1xuICAgIHJldHVybiBFTlVNX1RZUEVcbiAgfVxuXG4gIHN3aXRjaCAoc2NoZW1hLnR5cGUpIHtcbiAgICBjYXNlICdib29sZWFuJzogcmV0dXJuIEJPT0xFQU5fVFlQRVxuICAgIGNhc2UgJ251bWJlcic6IHJldHVybiBOVU1CRVJfVFlQRVxuICAgIGNhc2UgJ2ludGVnZXInOiByZXR1cm4gTlVNQkVSX1RZUEVcbiAgICBjYXNlICdzdHJpbmcnOiByZXR1cm4gU1RSSU5HX1RZUEVcbiAgICBjYXNlICdudWxsJzogcmV0dXJuIE5VTExfVFlQRVxuICAgIGRlZmF1bHQ6IGJyZWFrXG4gIH1cblxuICByZXR1cm4gQU5ZX1RZUEVcbn1cbiJdfQ==